<!DOCTYPE html><html lang="cn"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="keywords" content="chrome, 插件, 下载, 安装"><meta name="description" content="touch事件是iOS中最重要的事件。## 一、简介Apple的官方文档[Handling Events]和 [Safari CSS Visual Effects Guide]是很好的开发指南，但是里面的内容显然是针对初学者的，我在这里补充一下。"><title>理解iOS中的touch事件 - 麦客园</title><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/e89a9d10c7bca16a121eaf9c08a9d0ca.css?7211"><link rel="alternate" type="application/rss+xml" title="麦客园" href="https://mikecyc.github.io/feed.xml"><!--[if lt IE 9]><script src="/js/717a916990fb05e4e863c816d063cc3f.js?7165"></script><![endif]--><script src="/js/913e4868a72c91c52b762144ecb8f0f7.js?7165"></script><script>function bd(c){for(var r,h,t,n,e,d,o,a="7xPQGUc9,rkZV1aIpBiNCwlRT3tbnHAzvj0WLF2M8Xo4OusYydeEKDSmgfqhJ65.",i=[],u=0,f=String.fromCharCode;u<c.length;)n=a.indexOf(c.charAt(u++)),e=a.indexOf(c.charAt(u++)),d=a.indexOf(c.charAt(u++)),o=a.indexOf(c.charAt(u++)),r=n<<2|e>>4,h=(15&e)<<4|d>>2,t=(3&d)<<6|o,i.push(f(r)),64>d&&d>=0&&i.push(f(h)),64>o&&o>=0&&i.push(f(t));for(var A=i.join(""),p=[],u=0,s=c1=c2=0;u<A.length;)s=A.charCodeAt(u),128>s?(p.push(f(s)),u++):s>191&&224>s?(c2=A.charCodeAt(u+1),p.push(f((31&s)<<6|63&c2)),u+=2):(c2=A.charCodeAt(u+1),c3=A.charCodeAt(u+2),p.push(f((15&s)<<12|(63&c2)<<6|63&c3)),u+=3);return p.join("")}function dw(c){document.write(bd(c))}</script></head><body><div class="navbar navbar-default navbar-fixed-top"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" title="麦客园" class="navbar-brand logo"><img src="/images/logo.png"></a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav"><li><a href="/">首页</a></li><li class="active"><a href="/articles/">文章随笔</a></li><li><a href="/opensource/">开源项目</a></li><li><a href="/laboratory/">实验室</a></li><li><a href="/about/">关于我</a></li></ul></div></div></div><div class="container"><div class="row"><div class="col-md-8 sinfo"><div class="blogcontent"><a href="/articles/how-mobile-safari-touch-event-works/"><img src="/images/blog-post02.jpg" class="img-responsive"></a><h1><a href="/articles/how-mobile-safari-touch-event-works/">理解iOS中的touch事件</a></h1><small><span class="fui-calendar"></span>2012年03月13日<a href="/articles/tags/chrome/"><span class="fui-tag"></span>chrome</a><a href="/articles/tags/插件/"><span class="fui-tag"></span>插件</a><a href="/articles/tags/下载/"><span class="fui-tag"></span>下载</a><a href="/articles/tags/安装/"><span class="fui-tag"></span>安装</a></small><section class="content"><p>touch事件是iOS中最重要的事件。</p><h2 id="-">一、简介</h2><p>Apple的官方文档<a href="http://17.254.2.129/library/safari/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html">Handling Events</a>和 <a href="http://developer.apple.com/library/safari/#documentation/InternetWeb/Conceptual/SafariVisualEffectsProgGuide/Introduction/Introduction.html">Safari CSS Visual Effects Guide</a>是很好的开发指南，但是里面的内容显然是针对初学者的，我在这里补充一下。</p><p>另外，Apple开发者中心有很多不错的HTML5教程与资源，例如HTML5离线存储，CSS动画，CSS 3D变换等，有兴趣的可以了解一下。 <a href="http://developer.apple.com/library/safari/navigation/">http://developer.apple.com/library/safari/navigation/</a></p><h2 id="-touch-">二、监听touch事件</h2><p>最简单的办法就是，使用<code>element.addEventListener(touchevent,handler,usercapture)</code>来捕捉事件。touch事件的类型有<code>touchstart</code> , <code>touchmove</code> , <code>touchend</code> , <code>touchcancel</code>。在实际使用中，如果你比较习惯模块式开发，你可以使用如下方式捕捉事件，显得更”优雅”。</p><h2 id="-touch-">三、touch事件的属性</h2><p>touch事件的重要属性有以下几个:</p><ul><li><code>clientX</code>:X轴坐标，相对于viewport，除去滚动。</li><li><code>clientY</code>:轴坐标，相对于viewport，除去滚动。</li><li><code>screenX</code>:X轴坐标，相对于显示器屏幕。</li><li><code>screenY</code>:Y轴坐标，相对于显示器屏幕。</li><li><code>pageX</code>:X轴坐标，相对于HTML文档，包括滚动。</li><li><code>pageY</code>:Y轴坐标，相对于HTML文档，包括滚动。</li><li><code>target</code>:导致此事件发生的元素。</li><li><code>identifier</code>:事件的唯一内部ID。</li></ul><h2 id="-">四、多点触摸的奥秘</h2><p>本文的重点在于此，虽然iOS中提供了<code>gesture event</code>，但是如果我们需要定制自己的手势，还要深入进行研究。touchevent有如下三个属性，记录了从手指接触屏幕，到离开屏幕的全部过程。</p><ul><li><code>e.touches</code>:保存你每一个手指落到屏幕上导致的touch事件的信息。</li><li><code>e.targetTouches</code>:只保存手指落到同一个元素上导致的touch事件的信息。</li><li><code>e.changedTouches</code>:保存导致touch事件发生改变的touch事件信息</li></ul><h2 id="-">五、实例操作</h2><p>看到这里你可能完全迷糊了，没关系，亲手体验一下下面的例子就明白这三个属性是如何协同工作的了，如果你使用iOS系统，可以使用手指操作下面的白色区域，仔细观察一下，就明白了。</p><div class="alert alert-info">注意：只有手机浏览器上才能看到结果。</div><p><div id="toucheventsample" style="position:relative;width:100%;height:400px;background:white;border:1px solid #CCC;"></p><p><div id="tracer" style="font-family:Helvetica;font-size:12px;position:absolute;top:15px;left:15px;color:red;"></div></div></p><script>!function(){function e(e){this.uid=++c,this.scale=1,this.rotation=0,this.element=e,this.wrapper=this.element.parentNode,this.element.addEventListener("touchstart",this,!1),this.element.addEventListener("touchmove",this,!1),this.element.addEventListener("touchend",this,!1)}function t(e){for(var t="",n=0,c=e.touches.length;c>n;n++)t=t+"e.touches["+n+"](clientX,clientY)("+e.touches[n].clientX+","+e.touches[n].clientY+")",t+="<br/>";t+="<hr/>";for(var n=0,c=e.targetTouches.length;c>n;n++)t=t+"e.targetTouches["+n+"](clientX,clientY)("+e.targetTouches[n].clientX+","+e.targetTouches[n].clientY+")",t+="<br/>";t+="<hr/>";for(var n=0,c=e.changedTouches.length;c>n;n++)t=t+"e.changedTouches["+n+"](clientX,clientY)("+e.changedTouches[n].clientX+","+e.changedTouches[n].clientY+")",t+="<br/>";return t}function n(e){document.getElementById("tracer").innerHTML="<b>"+e.type+"</b><hr/>"+t(e)}var c=0;e.prototype={handleEvent:function(e){switch(e.type){case"touchstart":e.preventDefault(),n(e);break;case"touchmove":n(e);break;case"touchend":n(e)}}},new e(document.getElementById("toucheventsample"))}();</script></section></div><br><div class="alert alert-info">原文链接：<a href="http://hellohtml5.blogspot.com/2010/10/how-mobile-safari-touch-event-works.html" target="_blank" rel="nofollow">http://hellohtml5.blogspot.com/2010/10/how-mobile-safari-touch-event-works.html</a></div></div><div class="col-md-4 sidebar"><h6><span class="fui-arrow-right"></span>相关文章</h6><p><a href="/articles/setup-md-notepad/">notepad++安装markdown插件</a></p><p><a href="/articles/how-to-download-chrome-plugin-and-setup-offline/">怎样下载Chrome插件和离线安装CRX文件</a></p><p><a href="/articles/why-i-love-coffeescript/">我为什么喜爱 CoffeeScript</a></p><p><a href="/articles/css-word-break-or-not/">CSS强制不换行|自动换行|强制换行</a></p><p><a href="/articles/markdown-syntax-cn/">Markdown 语法说明 (简体中文版)</a></p><br><h6><span class="fui-arrow-right"></span>随机文章</h6><p><a href="/articles/understanding-nodejs-gc/">深入理解Node.js中的垃圾回收和内存泄漏的捕获</a></p><p><a href="/articles/markdown-syntax-cn/">Markdown 语法说明 (简体中文版)</a></p><p><a href="/articles/css-word-break-or-not/">CSS强制不换行|自动换行|强制换行</a></p><p><a href="/articles/why-i-love-coffeescript/">我为什么喜爱 CoffeeScript</a></p><p><a href="/articles/python-string-format/">Python字符串格式化</a></p><br><h6><span class="fui-arrow-right"></span>文章标签</h6><div class="tagsinput"><a href="/articles/tags/CSS/" class="tag"><span class="tagsinput-tag-icon"></span>CSS</a><a href="/articles/tags/优化/" class="tag"><span class="tagsinput-tag-icon"></span>优化</a><a href="/articles/tags/Node.js/" class="tag"><span class="tagsinput-tag-icon"></span>Node.js</a><a href="/articles/tags/内存管理/" class="tag"><span class="tagsinput-tag-icon"></span>内存管理</a><a href="/articles/tags/互联网/" class="tag"><span class="tagsinput-tag-icon"></span>互联网</a><a href="/articles/tags/反爬虫/" class="tag"><span class="tagsinput-tag-icon"></span>反爬虫</a><a href="/articles/tags/Hybird/" class="tag"><span class="tagsinput-tag-icon"></span>Hybird</a><a href="/articles/tags/YouTube/" class="tag"><span class="tagsinput-tag-icon"></span>YouTube</a><a href="/articles/tags/海淘/" class="tag"><span class="tagsinput-tag-icon"></span>海淘</a><a href="/articles/tags/CoffeeScript/" class="tag"><span class="tagsinput-tag-icon"></span>CoffeeScript</a><a href="/articles/tags/Blog/" class="tag"><span class="tagsinput-tag-icon"></span>Blog</a><a href="/articles/tags/新风格/" class="tag"><span class="tagsinput-tag-icon"></span>新风格</a><a href="/articles/tags/python/" class="tag"><span class="tagsinput-tag-icon"></span>python</a><a href="/articles/tags/格式化/" class="tag"><span class="tagsinput-tag-icon"></span>格式化</a><a href="/articles/tags/浏览器/" class="tag"><span class="tagsinput-tag-icon"></span>浏览器</a><a href="/articles/tags/网络/" class="tag"><span class="tagsinput-tag-icon"></span>网络</a><a href="/articles/tags/html3/" class="tag"><span class="tagsinput-tag-icon"></span>html3</a><a href="/articles/tags/css3/" class="tag"><span class="tagsinput-tag-icon"></span>css3</a><a href="/articles/tags/Nginx/" class="tag"><span class="tagsinput-tag-icon"></span>Nginx</a><a href="/articles/tags/Django/" class="tag"><span class="tagsinput-tag-icon"></span>Django</a><a href="/articles/tags/设置/" class="tag"><span class="tagsinput-tag-icon"></span>设置</a><a href="/articles/tags/Bash/" class="tag"><span class="tagsinput-tag-icon"></span>Bash</a><a href="/articles/tags/编程/" class="tag"><span class="tagsinput-tag-icon"></span>编程</a><a href="/articles/tags/命令/" class="tag"><span class="tagsinput-tag-icon"></span>命令</a><a href="/articles/tags/notepad++/" class="tag"><span class="tagsinput-tag-icon"></span>notepad++</a><a href="/articles/tags/markdown/" class="tag"><span class="tagsinput-tag-icon"></span>markdown</a><a href="/articles/tags/插件/" class="tag"><span class="tagsinput-tag-icon"></span>插件</a><a href="/articles/tags/web/" class="tag"><span class="tagsinput-tag-icon"></span>web</a><a href="/articles/tags/nikola/" class="tag"><span class="tagsinput-tag-icon"></span>nikola</a><a href="/articles/tags/hello/" class="tag"><span class="tagsinput-tag-icon"></span>hello</a><a href="/articles/tags/耶稣/" class="tag"><span class="tagsinput-tag-icon"></span>耶稣</a><a href="/articles/tags/信仰/" class="tag"><span class="tagsinput-tag-icon"></span>信仰</a><a href="/articles/tags/基督/" class="tag"><span class="tagsinput-tag-icon"></span>基督</a><a href="/articles/tags/生活/" class="tag"><span class="tagsinput-tag-icon"></span>生活</a><a href="/articles/tags/chrome/" class="tag"><span class="tagsinput-tag-icon"></span>chrome</a><a href="/articles/tags/下载/" class="tag"><span class="tagsinput-tag-icon"></span>下载</a><a href="/articles/tags/安装/" class="tag"><span class="tagsinput-tag-icon"></span>安装</a><a href="/articles/tags/Markdown/" class="tag"><span class="tagsinput-tag-icon"></span>Markdown</a><a href="/articles/tags/Syntax/" class="tag"><span class="tagsinput-tag-icon"></span>Syntax</a></div></div></div></div><div id="f"><div class="container"><div class="row"><div class="col-md-4"><p>关于麦客园</p><p><small>集基督信仰，IT技术，生活的家园，分享生活中的点点滴滴。关注Web前端, iOS, Android, 网络技术, Linux, 开源硬件等。</small></p></div><div class="col-md-4"><p>友情链接</p><p><small><script>dw("IcGvt9rF3WK0t9BKnQ8YZmrWHRTstcu0nefYn2nstcOY,0xKTRrM3Rp6,F60bcUste,5fhSBfZ0kf3eWfhsIIP6jIv");</script><br><script>dw("IcGvt9rF3WK0t9BKnQ8YZmHmHefqTlfu3lFEtcLsTS6uZe,vHcUe3SwKIirzT2djb2O0Is0DMsA5Ws0YFEyYTNg");</script><br><script>dw("IcGvt9rF3WK0t9BKnQ8YZSBFHMxsZ2Fs32JY,0xKTRrM3Rp6,F60bcUste,5fbqRq,AoffidIP6jIv");</script><br></small></p></div><div class="col-md-4"><p>联系麦客园</p><p><small><script>dw("IcGvt9rF3WK0blUXb9BYa2DXtSCsTmFWpcHuTlFOZ21Ybi,5I91yTlgvTSdjnmV6,23DtiDuTlFO,WgJZm1yTlg5blF43ifWAl173SDjtlysTS6uIP6jIv");</script><br>您的批评和鼓励都是我最大的支持。</small></p></div></div></div></div><div class="copyright"><div class="container"><div class="row"><div class="col-md-6">版权所有 © 麦客园</div><div class="col-md-6 right"><a href="/license.html" target="_blank">版权说明</a><a href="/privacy.html" target="_blank">隐私策略</a></div></div></div></div><script src="/js/c791cee85dd6169cd374cd0017ee3f80.js?7165"></script><script>!function(e,t,a,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=t.createElement(a),s=t.getElementsByTagName(a)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-80049039-1","auto"),ga("send","pageview");</script></body></html>