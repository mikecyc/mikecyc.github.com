<!DOCTYPE html><html lang="cn"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="keywords" content="信仰, 创业, 经验, 开源, c/c++, python, nodejs, javascript, linux, mac, ios, android"><meta name="description" content="集基督信仰，IT技术，生活的家园，分享生活中的点点滴滴。关注Web前端, iOS, Android, 网络技术, Linux, 开源硬件等。"><title>Python字符串格式化 - 麦客园</title><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/e89a9d10c7bca16a121eaf9c08a9d0ca.css?5968"><!--[if lt IE 9]><script src="/js/717a916990fb05e4e863c816d063cc3f.js?8508"></script><![endif]--><script src="/js/913e4868a72c91c52b762144ecb8f0f7.js?7987"></script><script>function bd(c){for(var r,h,t,n,e,d,o,a="7xPQGUc9,rkZV1aIpBiNCwlRT3tbnHAzvj0WLF2M8Xo4OusYydeEKDSmgfqhJ65.",i=[],u=0,f=String.fromCharCode;u<c.length;)n=a.indexOf(c.charAt(u++)),e=a.indexOf(c.charAt(u++)),d=a.indexOf(c.charAt(u++)),o=a.indexOf(c.charAt(u++)),r=n<<2|e>>4,h=(15&e)<<4|d>>2,t=(3&d)<<6|o,i.push(f(r)),64>d&&d>=0&&i.push(f(h)),64>o&&o>=0&&i.push(f(t));for(var A=i.join(""),p=[],u=0,s=c1=c2=0;u<A.length;)s=A.charCodeAt(u),128>s?(p.push(f(s)),u++):s>191&&224>s?(c2=A.charCodeAt(u+1),p.push(f((31&s)<<6|63&c2)),u+=2):(c2=A.charCodeAt(u+1),c3=A.charCodeAt(u+2),p.push(f((15&s)<<12|(63&c2)<<6|63&c3)),u+=3);return p.join("")}function dw(c){document.write(bd(c))}</script></head><body><div class="navbar navbar-default navbar-fixed-top"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" title="麦客园" class="navbar-brand logo"><img src="/images/logo.png"></a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav"><li><a href="/">首页</a></li><li class="active"><a href="/articles/">文章随笔</a></li><li><a href="/opensource/">开源项目</a></li><li><a href="/laboratory/">实验室</a></li><li><a href="/about/">关于我</a></li></ul></div></div></div><div class="container"><div class="row"><div class="col-md-8 sinfo"><div class="blogcontent"><a href="/articles/python-string-format/"><img src="/images/blog-post02.jpg" class="img-responsive"></a><h1><a href="/articles/python-string-format/">Python字符串格式化</a></h1><small><span class="fui-calendar"></span>2013年11月06日<a href="/articles/tags/python/"><span class="fui-tag"></span>python</a><a href="/articles/tags/格式化/"><span class="fui-tag"></span>格式化</a></small><section class="content"><p>在python中也有类似于c中的printf()的格式输出标记。在python中格式化输出字符串使用的是%运算符，通用的形式为</p>
<pre><code>格式标记字符串 % 要输出的值组
</code></pre><p>其中，左边部分的”格式标记字符串“可以完全和c中的一致。右边的’值组’如果有两个及以上的值则需要用小括号括起来，中间用短号隔开。重点来看左边的部分。左边部分的最简单形式为：</p>
<pre><code>%cdoe
</code></pre><p>其中的code有多种，不过由于在python中，所有东西都可以转换成string类型，因此，如果没有什么特殊需求完全可以全部使用’%s‘来标记。比如：</p>
<pre><code>&#39;%s %s %s&#39; % (1, 2.3, [&#39;one&#39;, &#39;two&#39;, &#39;three&#39;])
</code></pre><p>它的输出为’1 2.3 [‘one’, ‘two’, ‘three’]’，就是按照%左边的标记输出的。虽然第一个和第二值不是string类型，一样没有问题。在这个过程中，当电脑发现第一个值不是%s时，会先调用整型数的函数，把第一个值也就是1转成string类型，然后再调用str()函数来输出。前面说过还有一个repr()函数，如果要用这个函数，可以用%r来标记。除了%s外，还有很多类似的code:</p>
<pre><code>整型数：%d
无符号整型数：%u
八进制：%o
十六进制：%x   %X
浮点数：%f
科学记数法: %e   %E
根据数值的不同自动选择%e或%f: %g
根据数值的不同自动选择%E或%f: %G
</code></pre><!-- TEASER_END -->
<p>就跟前面说用\进行转义一样，这里用%作为格式标记的标识，也有一个%本身应该如何输出的问题。如果要在”格式标记字符串“中输出%本身，可以用%%来表示。
上面说的只是格式标记的最简间的形式，来看复杂一点的：</p>
<pre><code>&#39;%6.2f&#39; % 1.235
</code></pre><p>在这种形式中，在f的前面出现了一个类似小数的6.2它表示的意思是，总共输出的长度为6个字符，其中小数2位。还有更复杂的：</p>
<pre><code>&#39;%06.2f&#39; % 1.235
</code></pre><p>在6的前面多了一个0,表示如果输出的位数不足6位就用0补足6位。这一行的输出为‘001.24’，可以看到小数也占用一位。类似于这里0这样的标记还有-、+。其中，-表示左对齐，+表示在正数前面也标上+号，默认是不加的。最后来看最复杂的形式：</p>
<pre><code>&#39;%(name)s:%(score)06.1f&#39; %{&#39;score&#39;:9.5, &#39;name&#39;:&#39;newsim&#39;}
</code></pre><p>这种形式只用在要输出的内容为dictionary（一种python的数据类型）时，小括号中的(name)和(score)对应于后面的键值对中的键。前面的例子可以看到，”格式标记字符串“中标记的顺序和”要输出的值组”中的值是一一对应的，有顺序，一对一，二对二。而在这种形式中，则不是，每个格式标记对应哪个值由小括号中的键来指定。这行代码的输出为：’newsim:0009.5’。</p>
<p>有时候在%6.2f这种形式中，6和2也不能事先指定，会在程序运行过程中再产生，那怎么输入呢，当然不能用%%d.%df或%d.%d%f。可以用%<em>.</em>f的形式，当然在后面的”要输出的值组“中包含那两个<em>的值。比如：’%</em>.*f’ % (6, 2, 2.345)就相当于’%6.2f’ % 2.345。</p>
<p>这是这本书到此为止看起来最复杂的内容。不过如果记不住，或不想那么耐烦，完全可以全部用%s代替，或者用多个”+”来构造类似的输出字符串。这里的%真有点除法的味道，怪不得设计者会选择用%这个除号。</p>
<p>象C 中的sprintf函数一样，可以用“%”来格式化字符串。</p>
<h4 id="table-3-1-">Table 3.1. 字符串格式化代码</h4>
<pre><code>格式    描述
%%        百分号标记
%c        字符及其ASCII码
%s        字符串
%d        有符号整数(十进制)
%u        无符号整数(十进制)
%o        无符号整数(八进制)
%x        无符号整数(十六进制)
%X        无符号整数(十六进制大写字符)
%e        浮点数字(科学计数法)
%E        浮点数字(科学计数法，用E代替e)
%f        浮点数字(用小数点符号)
%g        浮点数字(根据值的大小采用%e或%f)
%G        浮点数字(类似于%g)
%p        指针(用十六进制打印值的内存地址)
%n        存储输出字符的数量放进参数列表的下一个变量中
</code></pre></section></div></div><div class="col-md-4 sidebar"><h6><span class="fui-arrow-right"></span>相关文章</h6><p><a href="/articles/nikola-web/">Nikola-静态博客A.K.A引擎，我是怎样创建Shisaa.jp</a></p><p><a href="/articles/how-to-download-chrome-plugin-and-setup-offline/">怎样下载Chrome插件和离线安装CRX文件</a></p><p><a href="/articles/how-mobile-safari-touch-event-works/">理解iOS中的touch事件</a></p><p><a href="/articles/how-to-set-https-in-django-and-nginx/">Nginx如何设置Django的https重定向</a></p><p><a href="/articles/markdown-syntax-cn/">Markdown 语法说明 (简体中文版)</a></p><br><h6><span class="fui-arrow-right"></span>随机文章</h6><p><a href="/articles/how-to-download-chrome-plugin-and-setup-offline/">怎样下载Chrome插件和离线安装CRX文件</a></p><p><a href="/articles/how-to-set-https-in-django-and-nginx/">Nginx如何设置Django的https重定向</a></p><p><a href="/articles/hello-world/">README</a></p><p><a href="/articles/strong-bash/">两个非常有用的Bash脚本编程命令</a></p><p><a href="/articles/ten-christian-life-code/">基督徒生活十大守则</a></p><br><h6><span class="fui-arrow-right"></span>文章标签</h6><div class="tagsinput"><a href="/articles/tags/python/" class="tag"><span class="tagsinput-tag-icon"></span>python</a><a href="/articles/tags/格式化/" class="tag"><span class="tagsinput-tag-icon"></span>格式化</a><a href="/articles/tags/浏览器/" class="tag"><span class="tagsinput-tag-icon"></span>浏览器</a><a href="/articles/tags/网络/" class="tag"><span class="tagsinput-tag-icon"></span>网络</a><a href="/articles/tags/html3/" class="tag"><span class="tagsinput-tag-icon"></span>html3</a><a href="/articles/tags/css3/" class="tag"><span class="tagsinput-tag-icon"></span>css3</a><a href="/articles/tags/Nginx/" class="tag"><span class="tagsinput-tag-icon"></span>Nginx</a><a href="/articles/tags/Django/" class="tag"><span class="tagsinput-tag-icon"></span>Django</a><a href="/articles/tags/设置/" class="tag"><span class="tagsinput-tag-icon"></span>设置</a><a href="/articles/tags/Bash/" class="tag"><span class="tagsinput-tag-icon"></span>Bash</a><a href="/articles/tags/编程/" class="tag"><span class="tagsinput-tag-icon"></span>编程</a><a href="/articles/tags/命令/" class="tag"><span class="tagsinput-tag-icon"></span>命令</a><a href="/articles/tags/notepad++/" class="tag"><span class="tagsinput-tag-icon"></span>notepad++</a><a href="/articles/tags/markdown/" class="tag"><span class="tagsinput-tag-icon"></span>markdown</a><a href="/articles/tags/插件/" class="tag"><span class="tagsinput-tag-icon"></span>插件</a><a href="/articles/tags/web/" class="tag"><span class="tagsinput-tag-icon"></span>web</a><a href="/articles/tags/nikola/" class="tag"><span class="tagsinput-tag-icon"></span>nikola</a><a href="/articles/tags/hello/" class="tag"><span class="tagsinput-tag-icon"></span>hello</a><a href="/articles/tags/blog/" class="tag"><span class="tagsinput-tag-icon"></span>blog</a><a href="/articles/tags/新风格/" class="tag"><span class="tagsinput-tag-icon"></span>新风格</a><a href="/articles/tags/耶稣/" class="tag"><span class="tagsinput-tag-icon"></span>耶稣</a><a href="/articles/tags/信仰/" class="tag"><span class="tagsinput-tag-icon"></span>信仰</a><a href="/articles/tags/基督/" class="tag"><span class="tagsinput-tag-icon"></span>基督</a><a href="/articles/tags/生活/" class="tag"><span class="tagsinput-tag-icon"></span>生活</a><a href="/articles/tags/chrome/" class="tag"><span class="tagsinput-tag-icon"></span>chrome</a><a href="/articles/tags/下载/" class="tag"><span class="tagsinput-tag-icon"></span>下载</a><a href="/articles/tags/安装/" class="tag"><span class="tagsinput-tag-icon"></span>安装</a><a href="/articles/tags/Markdown/" class="tag"><span class="tagsinput-tag-icon"></span>Markdown</a><a href="/articles/tags/Syntax/" class="tag"><span class="tagsinput-tag-icon"></span>Syntax</a></div></div></div></div><div id="f"><div class="container"><div class="row"><div class="col-md-4"><p>关于麦客园</p><p><small>集基督信仰，IT技术，生活的家园，分享生活中的点点滴滴。关注Web前端, iOS, Android, 网络技术, Linux, 开源硬件等。</small></p></div><div class="col-md-4"><p>友情链接</p><p><small><script>dw("IcGvt9rF3WK0t9BKnQ8YZmrWHRTstcu0nefYn2nstcOY,0xKTRrM3Rp6,F60bcUste,5fhSBfZ0kf3eWfhsIIP6jIv");</script><br><script>dw("IcGvt9rF3WK0t9BKnQ8YZmHmHefqTlfu3lFEtcLsTS6uZe,vHcUe3SwKIirzT2djb2O0Is0DMsA5Ws0YFEyYTNg");</script><br><script>dw("IcGvt9rF3WK0t9BKnQ8YZSBFHMxsZ2Fs32JY,0xKTRrM3Rp6,F60bcUste,5fbqRq,AoffidIP6jIv");</script><br></small></p></div><div class="col-md-4"><p>联系麦客园</p><p><small><script>dw("IcGvt9rF3WK0blUXb9BYa2DXtSCsTmFWpcHuTlFOZ21Ybi,5I91yTlgvTSdjnmV6,23DtiDuTlFO,WgJZm1yTlg5blF43ifWAl173SDjtlysTS6uIP6jIv");</script><br>您的批评和鼓励都是我最大的支持。</small></p></div></div></div></div><div class="copyright"><div class="container"><div class="row"><div class="col-md-6">版权所有 © 麦客园</div><div class="col-md-6 right"><a href="/license.html" target="_blank">版权说明</a><a href="/privacy.html" target="_blank">隐私策略</a></div></div></div></div><script src="/js/15bb3c3625c41aafadf42d2b056ae842.js?6291"></script></body></html>